{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Metadata": {
    "AWS::CloudFormation::Designer": {
      "f6ffaafc-16fb-4adf-882b-9f88015f51b7": {
        "size": {
          "width": 180,
          "height": 110
        },
        "position": {
          "x": 3860,
          "y": 450
        },
        "z": 1,
        "embeds": [
          "3674c3c0-b5c9-49ba-b8e5-5103fcddb78d",
          "9a076a69-7949-49c1-a19c-d1af72c159fc",
          "dbe5c584-7b5f-485c-a10b-9d55bcab415f",
          "f9abaa80-8d82-4ba3-8907-955e296bc4eb"
        ]
      },
      "62296718-6807-467b-99a9-38200ddb8319": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4120,
          "y": 470
        },
        "z": 1,
        "embeds": []
      },
      "804b9ca0-a56e-41b0-b501-c0a53d2f525f": {
        "source": {
          "id": "62296718-6807-467b-99a9-38200ddb8319"
        },
        "target": {
          "id": "f6ffaafc-16fb-4adf-882b-9f88015f51b7"
        },
        "z": 1
      },
      "f9abaa80-8d82-4ba3-8907-955e296bc4eb": {
        "size": {
          "width": 60,
          "height": 30
        },
        "position": {
          "x": 4040,
          "y": 270
        },
        "z": 0,
        "parent": "f6ffaafc-16fb-4adf-882b-9f88015f51b7",
        "embeds": []
      },
      "af638fc3-3398-47c6-8e86-5b7dec4662ba": {
        "source": {
          "id": "f9abaa80-8d82-4ba3-8907-955e296bc4eb"
        },
        "target": {
          "id": "f6ffaafc-16fb-4adf-882b-9f88015f51b7"
        },
        "z": 1
      },
      "dbe5c584-7b5f-485c-a10b-9d55bcab415f": {
        "size": {
          "width": 90,
          "height": 30
        },
        "position": {
          "x": 4030,
          "y": 370
        },
        "z": 0,
        "parent": "f6ffaafc-16fb-4adf-882b-9f88015f51b7",
        "embeds": []
      },
      "9a076a69-7949-49c1-a19c-d1af72c159fc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3910,
          "y": 300
        },
        "z": 0,
        "parent": "f6ffaafc-16fb-4adf-882b-9f88015f51b7",
        "embeds": [],
        "dependson": [
          "f6ffaafc-16fb-4adf-882b-9f88015f51b7"
        ],
        "isrelatedto": [
          "f02db624-8917-40f8-9023-6a80d6836a07"
        ]
      },
      "832a5185-7831-44af-abb0-1d3998415b9e": {
        "source": {
          "id": "9a076a69-7949-49c1-a19c-d1af72c159fc"
        },
        "target": {
          "id": "f6ffaafc-16fb-4adf-882b-9f88015f51b7"
        },
        "z": 2
      },
      "69b38e7c-eeb6-426b-8dc4-a1a66e118d7f": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 720,
          "y": 50
        },
        "z": 0,
        "embeds": [],
        "ismemberof": [
          "9a076a69-7949-49c1-a19c-d1af72c159fc"
        ]
      },
      "cd68fcef-de41-4cb3-8d1a-191ed8c6a32d": {
        "source": {
          "id": "69b38e7c-eeb6-426b-8dc4-a1a66e118d7f"
        },
        "target": {
          "id": "9a076a69-7949-49c1-a19c-d1af72c159fc"
        },
        "z": 2
      },
      "3674c3c0-b5c9-49ba-b8e5-5103fcddb78d": {
        "size": {
          "width": 110,
          "height": 50
        },
        "position": {
          "x": 4180,
          "y": 320
        },
        "z": 0,
        "parent": "f6ffaafc-16fb-4adf-882b-9f88015f51b7",
        "embeds": [
          "2f10149c-07c0-41b2-ae93-7d49b164e827"
        ]
      },
      "9928691f-7c5b-4f40-b8a4-751713dc6bfa": {
        "source": {
          "id": "3674c3c0-b5c9-49ba-b8e5-5103fcddb78d"
        },
        "target": {
          "id": "dbe5c584-7b5f-485c-a10b-9d55bcab415f"
        },
        "z": 0
      },
      "d9b9492d-a33f-4566-a22d-569a35fe58c0": {
        "source": {
          "id": "3674c3c0-b5c9-49ba-b8e5-5103fcddb78d"
        },
        "target": {
          "id": "f9abaa80-8d82-4ba3-8907-955e296bc4eb"
        },
        "z": 0
      },
      "2f10149c-07c0-41b2-ae93-7d49b164e827": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4300,
          "y": 470
        },
        "z": 0,
        "parent": "3674c3c0-b5c9-49ba-b8e5-5103fcddb78d",
        "embeds": [],
        "references": [
          "62296718-6807-467b-99a9-38200ddb8319"
        ]
      },
      "3038c30a-eb1d-4dd1-a44e-0a1ec7c34f79": {
        "source": {
          "id": "2f10149c-07c0-41b2-ae93-7d49b164e827"
        },
        "target": {
          "id": "62296718-6807-467b-99a9-38200ddb8319"
        },
        "z": 2
      },
      "7d8dbf07-d96e-4a0a-bf73-8e7ee445ed2e": {
        "source": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "target": {
          "id": "f9abaa80-8d82-4ba3-8907-955e296bc4eb"
        },
        "z": 11
      },
      "13308b98-d238-4de9-9bd3-d9f0e99d0843": {
        "source": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "target": {
          "id": "dbe5c584-7b5f-485c-a10b-9d55bcab415f"
        },
        "z": 12
      },
      "83e04eef-6526-4aa1-904c-6e040b8d4b7b": {
        "source": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "target": {
          "id": "62296718-6807-467b-99a9-38200ddb8319"
        },
        "z": 11
      },
      "c4f712a2-5ad8-444a-af2d-e844a0a0d21d": {
        "source": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "target": {
          "id": "f02db624-8917-40f8-9023-6a80d6836a07"
        },
        "z": 11
      },
      "b3529ba7-a16a-435d-a3f1-40d04449a51a": {
        "source": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08",
          "selector": "g:nth-child(1) g:nth-child(4) g:nth-child(4) circle:nth-child(1)     ",
          "port": "AWS::DependencyLink-*"
        },
        "target": {
          "id": "f02db624-8917-40f8-9023-6a80d6836a07"
        },
        "z": 12
      },
      "e853c9a6-c65b-4e78-97f9-f557b632c6dc": {
        "source": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "target": {
          "id": "f02db624-8917-40f8-9023-6a80d6836a07"
        },
        "z": 11
      },
      "a20dcf34-6b53-4abd-9a37-d18547cc7467": {
        "source": {
          "id": "2120777a-af9e-4b07-9a0b-b8393c308e21"
        },
        "target": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "z": 11
      },
      "8839cc3d-bcab-43e4-8544-77d8475b3454": {
        "source": {
          "id": "9a076a69-7949-49c1-a19c-d1af72c159fc"
        },
        "target": {
          "id": "f02db624-8917-40f8-9023-6a80d6836a07"
        },
        "z": 11
      },
      "29081c4e-62be-4fd7-9e10-f89d96e59ccb": {
        "source": {
          "id": "2120777a-af9e-4b07-9a0b-b8393c308e21"
        },
        "target": {
          "id": "7ffa7a86-d8ad-4fc7-b7e5-8937df83be08"
        },
        "z": 11
      },
      "a8ced0dd-aa63-4d50-83f2-2af68ae45e0a": {
        "source": {
          "id": "dea0c8de-d55d-4adb-a061-523335f02529"
        },
        "target": {
          "id": "81026f96-a90a-499e-bcd9-0190438f8388"
        },
        "z": 11
      },
      "c23f1a85-2d2b-478e-9437-f9dfe7ae62b2": {
        "source": {
          "id": "f6444669-fd72-4dd6-b7a7-a251a74caf28"
        },
        "target": {
          "id": "bc1c8512-adf9-4791-b85f-2ee3ca5cab21"
        },
        "z": 11
      },
      "56f4a522-4ee1-426f-9a7c-5a5a710e45a7": {
        "source": {
          "id": "4100791a-5fb9-4c5e-8107-f7a8f39e6eb0"
        },
        "target": {
          "id": "2379c93f-3dcf-420a-b465-c6f45c01e745"
        },
        "z": 11
      },
      "0111ac33-1b12-4c56-924e-8012cf8779b5": {
        "source": {
          "id": "9226303c-210f-4f21-a48e-ffbe5bc144e5"
        },
        "target": {
          "id": "9a076a69-7949-49c1-a19c-d1af72c159fc"
        },
        "z": 2
      },
      "0883017f-0951-4254-945f-06d7f94fa3c4": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3730,
          "y": 300
        },
        "z": 0,
        "embeds": [],
        "ismemberof": [
          "9a076a69-7949-49c1-a19c-d1af72c159fc"
        ]
      }
    }
  },
  "Mappings": {
    "AWSInstanceType2Arch": {
      "t1.micro": {
        "Arch": "PV64"
      },
      "t2.nano": {
        "Arch": "HVM64"
      },
      "t2.micro": {
        "Arch": "HVM64"
      },
      "t2.small": {
        "Arch": "HVM64"
      },
      "t2.medium": {
        "Arch": "HVM64"
      },
      "t2.large": {
        "Arch": "HVM64"
      },
      "m1.small": {
        "Arch": "PV64"
      },
      "m1.medium": {
        "Arch": "PV64"
      },
      "m1.large": {
        "Arch": "PV64"
      },
      "m1.xlarge": {
        "Arch": "PV64"
      },
      "m2.xlarge": {
        "Arch": "PV64"
      },
      "m2.2xlarge": {
        "Arch": "PV64"
      },
      "m2.4xlarge": {
        "Arch": "PV64"
      },
      "m3.medium": {
        "Arch": "HVM64"
      },
      "m3.large": {
        "Arch": "HVM64"
      },
      "m3.xlarge": {
        "Arch": "HVM64"
      },
      "m3.2xlarge": {
        "Arch": "HVM64"
      },
      "m4.large": {
        "Arch": "HVM64"
      },
      "m4.xlarge": {
        "Arch": "HVM64"
      },
      "m4.2xlarge": {
        "Arch": "HVM64"
      },
      "m4.4xlarge": {
        "Arch": "HVM64"
      },
      "m4.10xlarge": {
        "Arch": "HVM64"
      },
      "c1.medium": {
        "Arch": "PV64"
      },
      "c1.xlarge": {
        "Arch": "PV64"
      },
      "c3.large": {
        "Arch": "HVM64"
      },
      "c3.xlarge": {
        "Arch": "HVM64"
      },
      "c3.2xlarge": {
        "Arch": "HVM64"
      },
      "c3.4xlarge": {
        "Arch": "HVM64"
      },
      "c3.8xlarge": {
        "Arch": "HVM64"
      },
      "c4.large": {
        "Arch": "HVM64"
      },
      "c4.xlarge": {
        "Arch": "HVM64"
      },
      "c4.2xlarge": {
        "Arch": "HVM64"
      },
      "c4.4xlarge": {
        "Arch": "HVM64"
      },
      "c4.8xlarge": {
        "Arch": "HVM64"
      },
      "g2.2xlarge": {
        "Arch": "HVMG2"
      },
      "g2.8xlarge": {
        "Arch": "HVMG2"
      },
      "r3.large": {
        "Arch": "HVM64"
      },
      "r3.xlarge": {
        "Arch": "HVM64"
      },
      "r3.2xlarge": {
        "Arch": "HVM64"
      },
      "r3.4xlarge": {
        "Arch": "HVM64"
      },
      "r3.8xlarge": {
        "Arch": "HVM64"
      },
      "i2.xlarge": {
        "Arch": "HVM64"
      },
      "i2.2xlarge": {
        "Arch": "HVM64"
      },
      "i2.4xlarge": {
        "Arch": "HVM64"
      },
      "i2.8xlarge": {
        "Arch": "HVM64"
      },
      "d2.xlarge": {
        "Arch": "HVM64"
      },
      "d2.2xlarge": {
        "Arch": "HVM64"
      },
      "d2.4xlarge": {
        "Arch": "HVM64"
      },
      "d2.8xlarge": {
        "Arch": "HVM64"
      },
      "hi1.4xlarge": {
        "Arch": "HVM64"
      },
      "hs1.8xlarge": {
        "Arch": "HVM64"
      },
      "cr1.8xlarge": {
        "Arch": "HVM64"
      },
      "cc2.8xlarge": {
        "Arch": "HVM64"
      }
    },
    "AWSInstanceType2NATArch": {
      "t1.micro": {
        "Arch": "NATPV64"
      },
      "t2.nano": {
        "Arch": "NATHVM64"
      },
      "t2.micro": {
        "Arch": "NATHVM64"
      },
      "t2.small": {
        "Arch": "NATHVM64"
      },
      "t2.medium": {
        "Arch": "NATHVM64"
      },
      "t2.large": {
        "Arch": "NATHVM64"
      },
      "m1.small": {
        "Arch": "NATPV64"
      },
      "m1.medium": {
        "Arch": "NATPV64"
      },
      "m1.large": {
        "Arch": "NATPV64"
      },
      "m1.xlarge": {
        "Arch": "NATPV64"
      },
      "m2.xlarge": {
        "Arch": "NATPV64"
      },
      "m2.2xlarge": {
        "Arch": "NATPV64"
      },
      "m2.4xlarge": {
        "Arch": "NATPV64"
      },
      "m3.medium": {
        "Arch": "NATHVM64"
      },
      "m3.large": {
        "Arch": "NATHVM64"
      },
      "m3.xlarge": {
        "Arch": "NATHVM64"
      },
      "m3.2xlarge": {
        "Arch": "NATHVM64"
      },
      "m4.large": {
        "Arch": "NATHVM64"
      },
      "m4.xlarge": {
        "Arch": "NATHVM64"
      },
      "m4.2xlarge": {
        "Arch": "NATHVM64"
      },
      "m4.4xlarge": {
        "Arch": "NATHVM64"
      },
      "m4.10xlarge": {
        "Arch": "NATHVM64"
      },
      "c1.medium": {
        "Arch": "NATPV64"
      },
      "c1.xlarge": {
        "Arch": "NATPV64"
      },
      "c3.large": {
        "Arch": "NATHVM64"
      },
      "c3.xlarge": {
        "Arch": "NATHVM64"
      },
      "c3.2xlarge": {
        "Arch": "NATHVM64"
      },
      "c3.4xlarge": {
        "Arch": "NATHVM64"
      },
      "c3.8xlarge": {
        "Arch": "NATHVM64"
      },
      "c4.large": {
        "Arch": "NATHVM64"
      },
      "c4.xlarge": {
        "Arch": "NATHVM64"
      },
      "c4.2xlarge": {
        "Arch": "NATHVM64"
      },
      "c4.4xlarge": {
        "Arch": "NATHVM64"
      },
      "c4.8xlarge": {
        "Arch": "NATHVM64"
      },
      "g2.2xlarge": {
        "Arch": "NATHVMG2"
      },
      "g2.8xlarge": {
        "Arch": "NATHVMG2"
      },
      "r3.large": {
        "Arch": "NATHVM64"
      },
      "r3.xlarge": {
        "Arch": "NATHVM64"
      },
      "r3.2xlarge": {
        "Arch": "NATHVM64"
      },
      "r3.4xlarge": {
        "Arch": "NATHVM64"
      },
      "r3.8xlarge": {
        "Arch": "NATHVM64"
      },
      "i2.xlarge": {
        "Arch": "NATHVM64"
      },
      "i2.2xlarge": {
        "Arch": "NATHVM64"
      },
      "i2.4xlarge": {
        "Arch": "NATHVM64"
      },
      "i2.8xlarge": {
        "Arch": "NATHVM64"
      },
      "d2.xlarge": {
        "Arch": "NATHVM64"
      },
      "d2.2xlarge": {
        "Arch": "NATHVM64"
      },
      "d2.4xlarge": {
        "Arch": "NATHVM64"
      },
      "d2.8xlarge": {
        "Arch": "NATHVM64"
      },
      "hi1.4xlarge": {
        "Arch": "NATHVM64"
      },
      "hs1.8xlarge": {
        "Arch": "NATHVM64"
      },
      "cr1.8xlarge": {
        "Arch": "NATHVM64"
      },
      "cc2.8xlarge": {
        "Arch": "NATHVM64"
      }
    },
    "AWSRegionArch2AMI": {
      "us-east-1": {
        "PV64": "ami-22111148",
        "HVM64": "ami-08111162",
        "HVMG2": "ami-ebcec381"
      },
      "us-west-2": {
        "PV64": "ami-792bc219",
        "HVM64": "ami-c229c0a2",
        "HVMG2": "ami-0f28c06f"
      },
      "us-west-1": {
        "PV64": "ami-0e087a6e",
        "HVM64": "ami-1b0f7d7b",
        "HVMG2": "ami-ab9defcb"
      },
      "eu-west-1": {
        "PV64": "ami-a5368cd6",
        "HVM64": "ami-31328842",
        "HVMG2": "ami-d1d652a2"
      },
      "eu-central-1": {
        "PV64": "ami-2bde3944",
        "HVM64": "ami-e2df388d",
        "HVMG2": "ami-5240a73d"
      },
      "ap-northeast-1": {
        "PV64": "ami-37020959",
        "HVM64": "ami-f80e0596",
        "HVMG2": "ami-34a9a35a"
      },
      "ap-northeast-2": {
        "PV64": "NOT_SUPPORTED",
        "HVM64": "ami-6598510b",
        "HVMG2": "NOT_SUPPORTED"
      },
      "ap-southeast-1": {
        "PV64": "ami-ff0cc79c",
        "HVM64": "ami-e90dc68a",
        "HVMG2": "ami-6f6ca70c"
      },
      "ap-southeast-2": {
        "PV64": "ami-f5210196",
        "HVM64": "ami-f2210191",
        "HVMG2": "ami-88c1e1eb"
      },
      "sa-east-1": {
        "PV64": "ami-661e930a",
        "HVM64": "ami-1e159872",
        "HVMG2": "NOT_SUPPORTED"
      },
      "cn-north-1": {
        "PV64": "ami-08ef2465",
        "HVM64": "ami-49e22924",
        "HVMG2": "NOT_SUPPORTED"
      }
    }
  },
  "Parameters": {
    "InstanceType": {
      "Description": "WebServer EC2 instance type",
      "Type": "String",
      "Default": "t2.micro",
      "AllowedValues": [
        "t1.micro",
        "t2.nano",
        "t2.micro",
        "t2.small",
        "t2.medium",
        "t2.large",
        "m1.small",
        "m1.medium",
        "m1.large",
        "m1.xlarge",
        "m2.xlarge",
        "m2.2xlarge",
        "m2.4xlarge",
        "m3.medium",
        "m3.large",
        "m3.xlarge",
        "m3.2xlarge",
        "m4.large",
        "m4.xlarge",
        "m4.2xlarge",
        "m4.4xlarge",
        "m4.10xlarge",
        "c1.medium",
        "c1.xlarge",
        "c3.large",
        "c3.xlarge",
        "c3.2xlarge",
        "c3.4xlarge",
        "c3.8xlarge",
        "c4.large",
        "c4.xlarge",
        "c4.2xlarge",
        "c4.4xlarge",
        "c4.8xlarge",
        "g2.2xlarge",
        "g2.8xlarge",
        "r3.large",
        "r3.xlarge",
        "r3.2xlarge",
        "r3.4xlarge",
        "r3.8xlarge",
        "i2.xlarge",
        "i2.2xlarge",
        "i2.4xlarge",
        "i2.8xlarge",
        "d2.xlarge",
        "d2.2xlarge",
        "d2.4xlarge",
        "d2.8xlarge",
        "hi1.4xlarge",
        "hs1.8xlarge",
        "cr1.8xlarge",
        "cc2.8xlarge",
        "cg1.4xlarge"
      ],
      "ConstraintDescription": "must be a valid EC2 instance type."
    },
    "KeyPairName": {
      "Description": "Name of an existing EC2 KeyPair:",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "AllowedAddressesToWebServer": {
      "Description": "The IP address range that can be used to connect to the HTTP ELB",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "0.0.0.0/0",
      "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    }
  },
  "Resources": {
    "FujVPC": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true",
        "InstanceTenancy": "default",
        "Tags": [
          {
            "Key": "Createdby",
            "Value": "Mehdi"
          },
          {
            "Key": "Name",
            "Value": "FujVPC"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f6ffaafc-16fb-4adf-882b-9f88015f51b7"
        }
      }
    },
    "FujIGW": {
      "Type": "AWS::EC2::InternetGateway",
      "Properties": {
        "Tags": [
          {
            "Key": "Createdby",
            "Value": "Mehdi"
          },
          {
            "Key": "Name",
            "Value": "FujIGW"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "62296718-6807-467b-99a9-38200ddb8319"
        }
      }
    },
    "EC2VPCG17HMK": {
      "Type": "AWS::EC2::VPCGatewayAttachment",
      "Properties": {
        "InternetGatewayId": {
          "Ref": "FujIGW"
        },
        "VpcId": {
          "Ref": "FujVPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "804b9ca0-a56e-41b0-b501-c0a53d2f525f"
        }
      }
    },
    "PublicSubnetA": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            "0",
            {
              "Fn::GetAZs": ""
            }
          ]
        },
        "VpcId": {
          "Ref": "FujVPC"
        },
        "CidrBlock": "10.0.1.0/24",
        "MapPublicIpOnLaunch": "true",
        "Tags": [
          {
            "Key": "Createdby",
            "Value": "Mehdi"
          },
          {
            "Key": "Name",
            "Value": "PublicSubnetA"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f9abaa80-8d82-4ba3-8907-955e296bc4eb"
        }
      }
    },
    "PublicSubnetB": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            "1",
            {
              "Fn::GetAZs": ""
            }
          ]
        },
        "VpcId": {
          "Ref": "FujVPC"
        },
        "CidrBlock": "10.0.2.0/24",
        "Tags": [
          {
            "Key": "Createdby",
            "Value": "Mehdi"
          },
          {
            "Key": "Name",
            "Value": "PublicSubnetB"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "dbe5c584-7b5f-485c-a10b-9d55bcab415f"
        }
      }
    },
    "PublicSG": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "Allows SSH and HTTP",
        "VpcId": {
          "Ref": "FujVPC"
        },
        "SecurityGroupIngress": [
          {
            "IpProtocol": "tcp",
            "FromPort": "80",
            "ToPort": "80",
            "CidrIp": "0.0.0.0/0"
          },
          {
            "IpProtocol": "tcp",
            "FromPort": "443",
            "ToPort": "443",
            "CidrIp": "0.0.0.0/0"
          },
          {
            "IpProtocol": "tcp",
            "FromPort": "22",
            "ToPort": "22",
            "CidrIp": "0.0.0.0/0"
          }
        ],
        "Tags": [
          {
            "Key": "Createdby",
            "Value": "Mehdi"
          },
          {
            "Key": "Name",
            "Value": "PublicSG"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9a076a69-7949-49c1-a19c-d1af72c159fc"
        }
      },
      "DependsOn": [
        "FujVPC"
      ]
    },
    "PublicRouteTable": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "FujVPC"
        },
        "Tags": [
          {
            "Key": "Createdby",
            "Value": "Mehdi"
          },
          {
            "Key": "Name",
            "Value": "PublicRouteTable"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "3674c3c0-b5c9-49ba-b8e5-5103fcddb78d"
        }
      }
    },
    "EC2SRTA42PKP": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "PublicRouteTable"
        },
        "SubnetId": {
          "Ref": "PublicSubnetB"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9928691f-7c5b-4f40-b8a4-751713dc6bfa"
        }
      }
    },
    "EC2SRTA1JBZP": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "PublicRouteTable"
        },
        "SubnetId": {
          "Ref": "PublicSubnetA"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d9b9492d-a33f-4566-a22d-569a35fe58c0"
        }
      }
    },
    "InternetRoute": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "FujIGW"
        },
        "RouteTableId": {
          "Ref": "PublicRouteTable"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "2f10149c-07c0-41b2-ae93-7d49b164e827"
        }
      }
    },
    "EC2Instance1": {
      "Type": "AWS::EC2::Instance",
      "Properties": {
        "InstanceType": {
          "Ref": "InstanceType"
        },
        "SubnetId": {
          "Ref": "PublicSubnetA"
        },
        "SecurityGroupIds": [
          {
            "Ref": "PublicSG"
          }
        ],
        "KeyName": {
          "Ref": "KeyPairName"
        },
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegionArch2AMI",
            {
              "Ref": "AWS::Region"
            },
            {
              "Fn::FindInMap": [
                "AWSInstanceType2Arch",
                {
                  "Ref": "InstanceType"
                },
                "Arch"
              ]
            }
          ]
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash -xe\n",
                "yum update -y\n",
                "yum install httpd -y\n",
                "chkconfig httpd on\n",
                "service httpd start\n",
                "wget https://raw.githubusercontent.com/ezzobad/ted/master/ted.sh -O /tmp/ted.sh\n",
                "chmod +x /tmp/ted.sh; /tmp/ted.sh\n"
              ]
            ]
          }
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0883017f-0951-4254-945f-06d7f94fa3c4"
        }
      }
    }
  },
  "Outputs": {
    "PublicIP": {
      "Value": {
        "Fn::GetAtt": [
          "EC2Instance1",
          "PublicIp"
        ]
      },
      "Description": "Public IP of the EC2 instance."
    }
  }
}
